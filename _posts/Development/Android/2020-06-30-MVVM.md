---
layout : post
title : "MVVM 적용기"
subtitle : "MVVM에 대해 알게된 것들"
category : development
tags : android
---

# MVVM을 적용하면서 알게된 것들

나는 3가지의 아키텍쳐 패턴 `MVC`, `MVP`, `MVVM` 중에 하나를 선택해서 나의 코드를 좀 더 깔끔하고 OOP스럽고 SOLID를 지킬 수 있게 만들고 싶었다.

이왕 배우는 거면 가장 좋은 걸 배우고 싶었기에 가장 최신 패턴이자 좋은 퍼포먼스를 볼 수 있는 `MVVM`을 배우기로 했다.



일단 노베이스 상태에서 배우려니 이해가 정말 되지 않았다.

그리고 사실 지금도 MVVM적으로 코드를 짜본건 연습용 코드밖에 없었기에 확실하게 이해했다고는 말할 수는 없겠다.

실제로 시작한건 대충 올해 초였던것 같은데 그때 `DataBinding` 이랑 `Observable`정도만 하다가 다른 바쁜 일을 먼저 처리하게 되었었던 것 같다.

<br>

하지만 시간이 흘러 이제는 안드로이드 리팩토링을 더 이상 미룰 수 없게 되었고, MVVM 공부를 다시 시작했다. 그래도 역시 예전에 약간의 베이스라도 갖춰둔 덕분에 시간이 덜 소모된 것 같다. 뭐든지 많이 해봐야해.

나는 멘토를 해주는 사람이 없었기에 모든 것을 책과 구글링을 통해 해결해서 좀 더 힘들었다. 가이드라인을 제시해 주는 사람이 없으니..

최대한 닥치는 대로 MVVM과 기타 디자인 패턴에 대해서 정보를 찾아보고 이해했다.

<br>

그래서 최종적으로 내가 이해한 MVVM은 이렇다.

먼저 View.

View는 최대한 UI에 관련된 코드만 있는 Class다.

주요 기법은 `DataBinding`. View 내부에는 실제로 layout 연결해주고 binding 객체정도만 있으면 끝이다.. 웬만한 비즈니스 로직은 ViewModel에서 처리가 되기 때문.



그래서 ViewModel은?

ViewModel은 `DataBinding`을 통해 View와 연결이 되어 있다. XML에서 다 명시가 된다. 

그러니까 보자면 XML에서 View를 연결해주기 때문에 ViewModel은 View를 모른다고 표현을 하는 것이다.

ViewModel은 최대한 작은 기능별로 나눠서 쓰는게 바람직하다고 판단된다. 진정한 모듈화작업이지.

데이터들은 Repository를 통해 Model에서 받는데, 다만 ViewModel에서만 필요한 변수들은 자체적으로 선언해서 쓰는게 맞다는 결론이다.



그리고 Model.

Model은 말 그대로 데이터를 정의하는 곳. 이지만 Retrofit, Room, SharedPreference 등등 데이터를 불러오고 하는 작업들도 다 포함이다.



그럼 Repository는?

사실 MVVM 약자에는 들어가진 않지만 구글에서 제시한 구조도를 보면 ViewModel과 Model 사이에 존재한다.

역할은 그저 Model에 있는 데이터를 ViewModel로 전달해주는 것.

전달자 같은 개념이다. 확실한 모듈화를 위함인 것으로 판단된다.

ViewModel에서는 Repository로부터 View에 전달할 데이터를 받아서 처리해줄 뿐.

어떤 데이터를 가져와야 되는지는 Repository에서 처리하게 되는 것.





이게 정확히 이해한건지는 잘 모르겠지만 개인적으로는 요정도로 처리하면 만족스러울 것 같긴 하다. 안드로이드라서 Context 관련해서 문제가 없을지가 두렵긴 한데....

이게 맞다고 해도 실제로 적용해보고 몸에 익기 까지에는 시간이 좀 걸리겠지...